<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MWQLLMSF');</script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meet The Architect â€” Pixel Pals</title>
    <link rel="icon" href="/assets/img/logo.png">
    <link href="/assets/css/main.css" rel="stylesheet" type="text/css" />
</head>

<body class="has-full-header">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MWQLLMSF"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div id="nav-placeholder"></div>

    <header class="bgimg-1 display-container grayscale-min" id="mtc">
        <div class="display-left pad-lg">
            <h1 class="jumbo">The Architect</h1>
            <p class="large sub-title">The Architect of the Digital Pantheon.</p>
        </div>
    </header>
    <main>
        <div class="row pad-64">
            <div class="col-l4 col-m5 col-s12 pad-lg">
                <div class="cw-card pad-lg center-text quote-card">
                    <a href="/pages/pixelpals/founder.html"><img src="/assets/img/ABTS.png" alt="ABTS Logo"></a>
                    <h3>The Architect</h3>
                    <sub class="sub-title">Your friendly neighborhood data-streamer.</sub>
                    <p>"Welcome to the stream."</p>
                </div>
            </div>
            <div class="col-l8 col-m7 col-s12 pad-lg">
                <div class="cw-card pad-lg">
                    <h3>ABTS Twitch Stream</h3>
                    <div id="abts-twitch-embed" class="mg-lg"></div>
                </div>
            </div>
        </div>

        <div class="row pad-64">
            <div class="col-l6 col-m12 col-s12 mg-lg">
                <div class="cw-card pad-lg">
                    <h3>MLBT Video</h3>
                    <div class="responsive-embed mg-lg">
                        <iframe src="https://widgets.sociablekit.com/twitch-channel-videos/iframe/25553660" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
            <div class="col-l6 col-m12 col-s12 mg-lg">
                <div class="cw-card pad-lg">
                    <h3>ABTS VOD</h3>
                    <div class="responsive-embed mg-lg">
                        <iframe src="https://widgets.sociablekit.com/youtube-channel-videos/iframe/25553661" allowfullscreen></iframe>
                    </div>
                </div>
            </div>
        </div>

        <div class="container pad-64">
            <h2 class="center-text">Data-Stream's Library</h2>
            <div class="row" id="game-cards-container">
                <!-- Game cards will be inserted here by JavaScript -->
            </div>
        </div>
    </main>
    <div id="footer-placeholder"></div>

    <!-- Main JS, loads nav/footer and icons -->
    <script src="/assets/js/javascript.js"></script>

    <!-- Page-Specific Scripts -->
    <script src="https://embed.twitch.tv/embed/v1.js"></script>
    <script>
        // Wait for the main javascript file to load the DOM and icons
        document.addEventListener("DOMContentLoaded", () => {
            // Initialize Twitch Embed
            new Twitch.Embed("abts-twitch-embed", { 
                width: '100%', 
                height: 480, 
                channel: "agentblacktigerstreams" 
            });

            // Fetch and display game cards
            fetch('/assets/data/abts_games.json')
                .then(response => response.json())
                .then(games => {
                    const container = document.getElementById('game-cards-container');
                    if (!container) return;

                    const iconClassFor = (storeKey) => {
                        if (!storeKey) return 'fas fa-link';
                        switch (storeKey.toLowerCase()) {
                            case 'steam': return 'fab fa-steam';
                            case 'epicgames': return 'fas fa-bolt';
                            case 'itchio': return 'fas fa-ghost';
                            case 'gog': return 'fas fa-compact-disc';
                            case 'xbox': return 'fab fa-xbox';
                            case 'playstation': return 'fab fa-playstation';
                            case 'nintendo': return 'fas fa-gamepad';
                            case 'newgrounds': return 'fas fa-star';
                            case 'other': return 'fas fa-store';
                            default: return 'fas fa-link';
                        }
                    }

                    const placeholder = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' width='600' height='300'><rect fill='#ddd' width='100%' height='100%'/><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='#666' font-size='20'>No image</text></svg>`);
                    const placeholderSrc = `data:image/svg+xml;utf8,${placeholder}`;

                    games.forEach(game => {
                        const primaryLink = game.primary_link || '#';
                        const imgSrc = game.image || placeholderSrc;

                        const icons = (game.storefronts || []).map(s => {
                            const cls = iconClassFor(s.store || s.store.toLowerCase());
                            return `<a class="storefront" href="${s.url}" title="${s.store}" target="_blank" rel="noopener"><i class="${cls}" aria-hidden="true"></i><span class="store-label">${s.store}</span></a>`
                        }).join(' ');

                        const card = `
                            <div class="col-l4 col-m6 col-s12 mg-lg">
                                <div class="cw-card game-card">
                                    <a href="${primaryLink}" style="text-decoration: none;" target="_blank" rel="noopener">
                                        <img src="${imgSrc}" alt="${game.name}" style="width:100%">
                                    </a>
                                    <div class="container center-text">
                                        <h3><a href="${primaryLink}" style="text-decoration: none;" target="_blank" rel="noopener">${game.name}</a></h3>
                                        <p>${game.description || ''}</p>
                                        <div class="storefronts">${icons}</div>
                                    </div>
                                </div>
                            </div>
                        `;
                        container.innerHTML += card;
                    });
                });
        });
    </script>
</body>
</html>
